const data=[
  {
    "": 0,
    "rallyid": 1,
    "server": "Djokovic",
    "x": 1.86,
    "y": 16.8
  },
  {
    "": 1,
    "rallyid": 3,
    "server": "Djokovic",
    "x": 7.05,
    "y": 16.97
  },
  {
    "": 2,
    "rallyid": 6,
    "server": "Djokovic",
    "x": 8.04,
    "y": 17.8
  },
  {
    "": 3,
    "rallyid": 8,
    "server": "Nadal",
    "x": 4.44,
    "y": 16.24
  },
  {
    "": 4,
    "rallyid": 9,
    "server": "Nadal",
    "x": 5.71,
    "y": 16.4
  },
  {
    "": 5,
    "rallyid": 11,
    "server": "Nadal",
    "x": 4.66,
    "y": 16.24
  },
  {
    "": 6,
    "rallyid": 13,
    "server": "Nadal",
    "x": 5.83,
    "y": 16.72
  },
  {
    "": 7,
    "rallyid": 14,
    "server": "Nadal",
    "x": 0.98,
    "y": 17.3
  },
  {
    "": 8,
    "rallyid": 15,
    "server": "Djokovic",
    "x": 5.58,
    "y": 5.41
  },
  {
    "": 9,
    "rallyid": 17,
    "server": "Djokovic",
    "x": 3.87,
    "y": 10.83
  },
  {
    "": 10,
    "rallyid": 18,
    "server": "Djokovic",
    "x": 5.14,
    "y": 6.51
  },
  {
    "": 11,
    "rallyid": 20,
    "server": "Nadal",
    "x": 6.68,
    "y": 4.64
  },
  {
    "": 12,
    "rallyid": 22,
    "server": "Nadal",
    "x": 2.77,
    "y": 6.71
  },
  {
    "": 13,
    "rallyid": 23,
    "server": "Nadal",
    "x": 4.27,
    "y": 6.51
  },
  {
    "": 14,
    "rallyid": 24,
    "server": "Nadal",
    "x": 7.55,
    "y": 6.66
  },
  {
    "": 15,
    "rallyid": 25,
    "server": "Nadal",
    "x": 1.01,
    "y": 7.63
  },
  {
    "": 16,
    "rallyid": 26,
    "server": "Nadal",
    "x": 5.03,
    "y": 6.32
  },
  {
    "": 17,
    "rallyid": 28,
    "server": "Nadal",
    "x": 3.07,
    "y": 6.41
  },
  {
    "": 18,
    "rallyid": 29,
    "server": "Nadal",
    "x": 7.98,
    "y": 5.93
  },
  {
    "": 19,
    "rallyid": 30,
    "server": "Nadal",
    "x": 1.16,
    "y": 7.9
  },
  {
    "": 20,
    "rallyid": 32,
    "server": "Djokovic",
    "x": 4.53,
    "y": 17.89
  },
  {
    "": 21,
    "rallyid": 34,
    "server": "Djokovic",
    "x": 7.15,
    "y": 17.46
  },
  {
    "": 22,
    "rallyid": 36,
    "server": "Nadal",
    "x": 3.19,
    "y": 16.16
  },
  {
    "": 23,
    "rallyid": 37,
    "server": "Nadal",
    "x": 8.4,
    "y": 16.16
  },
  {
    "": 24,
    "rallyid": 38,
    "server": "Nadal",
    "x": 4.53,
    "y": 15.92
  },
  {
    "": 25,
    "rallyid": 40,
    "server": "Nadal",
    "x": 5.88,
    "y": 16.48
  },
  {
    "": 26,
    "rallyid": 42,
    "server": "Nadal",
    "x": 3.68,
    "y": 16.56
  },
  {
    "": 27,
    "rallyid": 43,
    "server": "Nadal",
    "x": 7.76,
    "y": 16
  },
  {
    "": 28,
    "rallyid": 44,
    "server": "Djokovic",
    "x": 8.23,
    "y": 6.96
  },
  {
    "": 29,
    "rallyid": 46,
    "server": "Djokovic",
    "x": 2.61,
    "y": 11.58
  },
  {
    "": 30,
    "rallyid": 48,
    "server": "Djokovic",
    "x": 5.31,
    "y": 5.79
  },
  {
    "": 31,
    "rallyid": 49,
    "server": "Djokovic",
    "x": 1.86,
    "y": 8.77
  },
  {
    "": 32,
    "rallyid": 51,
    "server": "Nadal",
    "x": 7.08,
    "y": 6.81
  },
  {
    "": 33,
    "rallyid": 54,
    "server": "Nadal",
    "x": 1.83,
    "y": 8
  },
  {
    "": 34,
    "rallyid": 56,
    "server": "Nadal",
    "x": 5.3,
    "y": 6.36
  },
  {
    "": 35,
    "rallyid": 57,
    "server": "Nadal",
    "x": 4.13,
    "y": 7.48
  },
  {
    "": 36,
    "rallyid": 59,
    "server": "Djokovic",
    "x": 1.4,
    "y": 16.64
  },
  {
    "": 37,
    "rallyid": 60,
    "server": "Djokovic",
    "x": 4.74,
    "y": 15.53
  },
  {
    "": 38,
    "rallyid": 62,
    "server": "Djokovic",
    "x": 1.68,
    "y": 16.32
  },
  {
    "": 39,
    "rallyid": 63,
    "server": "Djokovic",
    "x": 5.08,
    "y": 16.8
  },
  {
    "": 40,
    "rallyid": 64,
    "server": "Djokovic",
    "x": 0.86,
    "y": 16
  },
  {
    "": 41,
    "rallyid": 65,
    "server": "Nadal",
    "x": 1.63,
    "y": 16.26
  },
  {
    "": 42,
    "rallyid": 66,
    "server": "Nadal",
    "x": 8.69,
    "y": 17.43
  },
  {
    "": 43,
    "rallyid": 67,
    "server": "Nadal",
    "x": 4.63,
    "y": 17.09
  },
  {
    "": 44,
    "rallyid": 70,
    "server": "Nadal",
    "x": 7.35,
    "y": 16.26
  },
  {
    "": 45,
    "rallyid": 71,
    "server": "Nadal",
    "x": 4.91,
    "y": 15.54
  },
  {
    "": 46,
    "rallyid": 73,
    "server": "Nadal",
    "x": 8.08,
    "y": 15.54
  },
  {
    "": 47,
    "rallyid": 75,
    "server": "Djokovic",
    "x": 2.05,
    "y": 16.84
  },
  {
    "": 48,
    "rallyid": 77,
    "server": "Djokovic",
    "x": 6.16,
    "y": 15.85
  },
  {
    "": 49,
    "rallyid": 78,
    "server": "Djokovic",
    "x": 3.93,
    "y": 16.26
  },
  {
    "": 50,
    "rallyid": 79,
    "server": "Djokovic",
    "x": 5.13,
    "y": 16.67
  },
  {
    "": 51,
    "rallyid": 80,
    "server": "Nadal",
    "x": 5.24,
    "y": 6.79
  },
  {
    "": 52,
    "rallyid": 82,
    "server": "Nadal",
    "x": 7.76,
    "y": 6.49
  },
  {
    "": 53,
    "rallyid": 84,
    "server": "Nadal",
    "x": 3.14,
    "y": 7.48
  },
  {
    "": 54,
    "rallyid": 86,
    "server": "Nadal",
    "x": 7.34,
    "y": 6.44
  },
  {
    "": 55,
    "rallyid": 87,
    "server": "Nadal",
    "x": 1.6,
    "y": 7.91
  },
  {
    "": 56,
    "rallyid": 89,
    "server": "Djokovic",
    "x": 5.9,
    "y": 5.94
  },
  {
    "": 57,
    "rallyid": 91,
    "server": "Djokovic",
    "x": 2.89,
    "y": 9.56
  },
  {
    "": 58,
    "rallyid": 92,
    "server": "Djokovic",
    "x": 5,
    "y": 5.94
  },
  {
    "": 59,
    "rallyid": 93,
    "server": "Djokovic",
    "x": 4.92,
    "y": 10.41
  },
  {
    "": 60,
    "rallyid": 94,
    "server": "Djokovic",
    "x": 4.65,
    "y": 6.85
  },
  {
    "": 61,
    "rallyid": 96,
    "server": "Nadal",
    "x": 3.95,
    "y": 17.35
  },
  {
    "": 62,
    "rallyid": 97,
    "server": "Nadal",
    "x": 8.08,
    "y": 17.01
  },
  {
    "": 63,
    "rallyid": 98,
    "server": "Nadal",
    "x": 1.46,
    "y": 16.18
  },
  {
    "": 64,
    "rallyid": 99,
    "server": "Nadal",
    "x": 7.63,
    "y": 16.01
  },
  {
    "": 65,
    "rallyid": 100,
    "server": "Nadal",
    "x": 4.37,
    "y": 16.01
  },
  {
    "": 66,
    "rallyid": 103,
    "server": "Djokovic",
    "x": 1.24,
    "y": 16.76
  },
  {
    "": 67,
    "rallyid": 104,
    "server": "Djokovic",
    "x": 8.25,
    "y": 16.67
  },
  {
    "": 68,
    "rallyid": 105,
    "server": "Djokovic",
    "x": 1.24,
    "y": 16.18
  },
  {
    "": 69,
    "rallyid": 108,
    "server": "Djokovic",
    "x": 5.42,
    "y": 16.51
  },
  {
    "": 70,
    "rallyid": 109,
    "server": "Djokovic",
    "x": 0.93,
    "y": 15.94
  },
  {
    "": 71,
    "rallyid": 110,
    "server": "Djokovic",
    "x": 4.94,
    "y": 16.1
  },
  {
    "": 72,
    "rallyid": 111,
    "server": "Djokovic",
    "x": 1.63,
    "y": 17.52
  },
  {
    "": 73,
    "rallyid": 112,
    "server": "Djokovic",
    "x": 5.2,
    "y": 16.59
  },
  {
    "": 74,
    "rallyid": 114,
    "server": "Djokovic",
    "x": 1.4,
    "y": 15.77
  },
  {
    "": 75,
    "rallyid": 115,
    "server": "Djokovic",
    "x": 4.86,
    "y": 15.46
  },
  {
    "": 76,
    "rallyid": 117,
    "server": "Nadal",
    "x": 7.45,
    "y": 6.54
  },
  {
    "": 77,
    "rallyid": 120,
    "server": "Nadal",
    "x": 7.71,
    "y": 7
  },
  {
    "": 78,
    "rallyid": 122,
    "server": "Nadal",
    "x": 4.86,
    "y": 6.49
  },
  {
    "": 79,
    "rallyid": 123,
    "server": "Nadal",
    "x": 5.65,
    "y": 5.89
  },
  {
    "": 80,
    "rallyid": 126,
    "server": "Djokovic",
    "x": 1.79,
    "y": 8.97
  },
  {
    "": 81,
    "rallyid": 127,
    "server": "Djokovic",
    "x": 4.54,
    "y": 7.96
  },
  {
    "": 82,
    "rallyid": 128,
    "server": "Djokovic",
    "x": 1.46,
    "y": 8.41
  },
  {
    "": 83,
    "rallyid": 130,
    "server": "Nadal",
    "x": 4.38,
    "y": 17.18
  },
  {
    "": 84,
    "rallyid": 131,
    "server": "Nadal",
    "x": 7.73,
    "y": 16.1
  },
  {
    "": 85,
    "rallyid": 132,
    "server": "Nadal",
    "x": 0.89,
    "y": 17.09
  },
  {
    "": 86,
    "rallyid": 134,
    "server": "Nadal",
    "x": 7.25,
    "y": 16.1
  },
  {
    "": 87,
    "rallyid": 135,
    "server": "Nadal",
    "x": 3.67,
    "y": 16.76
  },
  {
    "": 88,
    "rallyid": 136,
    "server": "Nadal",
    "x": 8.57,
    "y": 16.67
  },
  {
    "": 89,
    "rallyid": 139,
    "server": "Djokovic",
    "x": 2.74,
    "y": 17.52
  },
  {
    "": 90,
    "rallyid": 141,
    "server": "Djokovic",
    "x": 5.51,
    "y": 17.35
  },
  {
    "": 91,
    "rallyid": 143,
    "server": "Djokovic",
    "x": 4.19,
    "y": 16.51
  },
  {
    "": 92,
    "rallyid": 146,
    "server": "Djokovic",
    "x": 8.41,
    "y": 17.26
  },
  {
    "": 93,
    "rallyid": 147,
    "server": "Nadal",
    "x": 5.04,
    "y": 5.22
  },
  {
    "": 94,
    "rallyid": 149,
    "server": "Nadal",
    "x": 4.78,
    "y": 4.26
  },
  {
    "": 95,
    "rallyid": 152,
    "server": "Nadal",
    "x": 2.13,
    "y": 7.91
  },
  {
    "": 96,
    "rallyid": 154,
    "server": "Nadal",
    "x": 6.25,
    "y": 6.34
  },
  {
    "": 97,
    "rallyid": 155,
    "server": "Nadal",
    "x": 1.74,
    "y": 7.05
  },
  {
    "": 98,
    "rallyid": 156,
    "server": "Djokovic",
    "x": 8.19,
    "y": 6.79
  },
  {
    "": 99,
    "rallyid": 157,
    "server": "Djokovic",
    "x": 2.04,
    "y": 10.23
  },
  {
    "": 100,
    "rallyid": 158,
    "server": "Djokovic",
    "x": 8.2,
    "y": 8.13
  },
  {
    "": 101,
    "rallyid": 161,
    "server": "Djokovic",
    "x": 8.14,
    "y": 6.14
  },
  {
    "": 102,
    "rallyid": 162,
    "server": "Nadal",
    "x": 4,
    "y": 17.52
  },
  {
    "": 103,
    "rallyid": 163,
    "server": "Nadal",
    "x": 8.46,
    "y": 16.67
  },
  {
    "": 104,
    "rallyid": 164,
    "server": "Nadal",
    "x": 1.27,
    "y": 16.42
  },
  {
    "": 105,
    "rallyid": 168,
    "server": "Nadal",
    "x": 0.97,
    "y": 17.18
  },
  {
    "": 106,
    "rallyid": 169,
    "server": "Djokovic",
    "x": 3.5,
    "y": 17.87
  },
  {
    "": 107,
    "rallyid": 170,
    "server": "Djokovic",
    "x": 4.91,
    "y": 16.92
  },
  {
    "": 108,
    "rallyid": 171,
    "server": "Djokovic",
    "x": 0.95,
    "y": 16.84
  },
  {
    "": 109,
    "rallyid": 173,
    "server": "Djokovic",
    "x": 5.28,
    "y": 16.1
  },
  {
    "": 110,
    "rallyid": 174,
    "server": "Djokovic",
    "x": 1.3,
    "y": 16.26
  },
  {
    "": 111,
    "rallyid": 175,
    "server": "Djokovic",
    "x": 5.07,
    "y": 16.76
  },
  {
    "": 112,
    "rallyid": 176,
    "server": "Djokovic",
    "x": 1.05,
    "y": 15.3
  },
  {
    "": 113,
    "rallyid": 178,
    "server": "Djokovic",
    "x": 8.07,
    "y": 17.18
  },
  {
    "": 114,
    "rallyid": 179,
    "server": "Nadal",
    "x": 6.08,
    "y": 6.19
  },
  {
    "": 115,
    "rallyid": 180,
    "server": "Nadal",
    "x": 4.64,
    "y": 7.42
  },
  {
    "": 116,
    "rallyid": 182,
    "server": "Nadal",
    "x": 7.9,
    "y": 6.95
  },
  {
    "": 117,
    "rallyid": 183,
    "server": "Nadal",
    "x": 4.58,
    "y": 7
  },
  {
    "": 118,
    "rallyid": 186,
    "server": "Nadal",
    "x": 5.6,
    "y": 7.42
  },
  {
    "": 119,
    "rallyid": 188,
    "server": "Djokovic",
    "x": 7.69,
    "y": 7.11
  },
  {
    "": 120,
    "rallyid": 189,
    "server": "Djokovic",
    "x": 4.46,
    "y": 8.55
  },
  {
    "": 121,
    "rallyid": 190,
    "server": "Djokovic",
    "x": 4.65,
    "y": 6.74
  },
  {
    "": 122,
    "rallyid": 191,
    "server": "Djokovic",
    "x": 4.65,
    "y": 8.86
  },
  {
    "": 123,
    "rallyid": 193,
    "server": "Djokovic",
    "x": 4.43,
    "y": 6.95
  },
  {
    "": 124,
    "rallyid": 194,
    "server": "Djokovic",
    "x": 4.82,
    "y": 8.29
  },
  {
    "": 125,
    "rallyid": 195,
    "server": "Djokovic",
    "x": 8.1,
    "y": 7.16
  },
  {
    "": 126,
    "rallyid": 196,
    "server": "Djokovic",
    "x": 6.08,
    "y": 7.85
  },
  {
    "": 127,
    "rallyid": 198,
    "server": "Nadal",
    "x": 4.41,
    "y": 16.42
  },
  {
    "": 128,
    "rallyid": 199,
    "server": "Nadal",
    "x": 5.89,
    "y": 16.42
  },
  {
    "": 129,
    "rallyid": 201,
    "server": "Nadal",
    "x": 2.38,
    "y": 17.43
  },
  {
    "": 130,
    "rallyid": 202,
    "server": "Nadal",
    "x": 8.29,
    "y": 15.88
  },
  {
    "": 131,
    "rallyid": 204,
    "server": "Nadal",
    "x": 3.21,
    "y": 16.24
  },
  {
    "": 132,
    "rallyid": 206,
    "server": "Nadal",
    "x": 6.49,
    "y": 16.64
  }
];


      
const DjokovicData=[];
const NadalData=[]

const Djokovic1Data=[]
const Djokovic2Data=[]
const Djokovic3Data=[]
const Nadal1Data=[]
const Nadal2Data=[]
const Nadal3Data=[]

data.forEach(item=>{
  if(item.server==="Djokovic"){
    DjokovicData.push(item);
  } else if(item.server==="Nadal"){
    NadalData.push(item);
  }
});

DjokovicData.forEach(item=>{
   if(item.rallyid<=64 && item.rallyid>0){
    Djokovic1Data.push(item);
  }else if(item.rallyid>64 && item.rallyid<=128){
    Djokovic2Data.push(item);
  }else if(item.rallyid>=130 && item.rallyid<=206){
    Djokovic3Data.push(item);
  }
});
NadalData.forEach(item=>{
  if(item.rallyid<=64 && item.rallyid>0){
    Nadal1Data.push(item);
  }else if(item.rallyid>64 && item.rallyid<=128){
    Nadal2Data.push(item);
  }else if(item.rallyid>=130 && item.rallyid<=206){
    Nadal3Data.push(item);
  }
});


const svg_court = d3.select("#tennis-court");

const height_court =219.4;
const width_court = 118.9 * 4;
const service_box = 125;
const double_field = 27.4;
const baseline_serviceline = 110;
const breite_einzel = 164.6;
const serviceline_net = 125;

    // Court outline
svg_court
    .append("rect")
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", height_court)
    .attr("height", width_court)
    .attr("fill", "#5581A6")
    .attr("stroke", "white");
  
  // Net
  svg_court
    .append("line")
    .attr("x1", height_court)
    .attr("y1", width_court / 2)
    .attr("x2", 0)
    .attr("y2", width_court / 2)
    .attr("stroke", "white");
  
  // Serving rectangle
  svg_court
    .append("rect")
    .attr("x", double_field)
    .attr("y", baseline_serviceline)
    .attr("width", breite_einzel)
    .attr("height", serviceline_net * 2)
    .attr("fill", "none")
    .attr("stroke", "white");
  
  // Service lines
  svg_court
    .append("line")
    .attr("x1", height_court / 2)
    .attr("y1", width_court / 2 - service_box)
    .attr("x2", height_court / 2)
    .attr("y2", width_court / 2 + service_box)
    .attr("stroke", "white");

    svg_court
    .append("line")
    .attr("x1", height_court / 2)
    .attr("y1", 0)
    .attr("x2", height_court / 2)
    .attr("y2", 0 + 0.45)
    .attr("stroke", "white");

    svg_court
    .append("line")
    .attr("x1", height_court / 2)
    .attr("y1", width_court)
    .attr("x2", height_court / 2)
    .attr("y2", width_court - 0.45)
    .attr("stroke", "white");

    svg_court
    .append("line")
    .attr("x1", double_field)
    .attr("y1", 0)
    .attr("x2", double_field)
    .attr("y2", width_court)
    .attr("stroke", "white");

    svg_court
    .append("line")
    .attr("x1", height_court - double_field)
    .attr("y1", 0)
    .attr("x2", height_court - double_field)
    .attr("y2", width_court)
    .attr("stroke", "white");


let redBallsCount=0;
let yellowBallsCount=0;
let totalBallsCount=0; 
let redBallsPercentage=0;
let yellowBallsPercentage=0; 
let accuracyText; 


function update(data) {
  // Remove existing tennis balls
  svg_court.selectAll(".tennis-ball")
  .transition()
  .duration(500)
  .attr("r",0)
  .remove();
  svg_court.selectAll("text")
  .remove();

  // Draw tennis balls based on the new data
  const tennisBalls = svg_court.selectAll(".tennis-ball")
    .data(data)
    .enter()
    .append("circle")
    .attr("class", "tennis-ball")
    .attr("cx", d => d.x*20) // x-koordinata iz podataka
    .attr("cy", d => d.y*20) // y-koordinata iz podataka
    .attr("r", 0) // veličina lopte
    .attr("fill", "yellow") // boja lopte
    .attr("stroke", "black") // boja ruba lopte
    .attr("stroke-width", 1) // debljina ruba lopte
    .transition()
    .duration(1000) 
    .attr("r", 3)
    .attr("fill", d => {
      
      if (
        d.x*20 >= 0 && d.x*20 <= height_court &&
        d.y*20 >= 0 && d.y*20 <= width_court &&
        d.x*20 >= double_field && d.x*20 <= (double_field + breite_einzel) &&
        d.y*20 >= baseline_serviceline && d.y*20 <= (baseline_serviceline + serviceline_net * 2)
        ){
        yellowBallsCount++;
        totalBallsCount++;
        return "yellow";
      } else {
        redBallsCount++;
        totalBallsCount++;
        return "red";
      }
    });
    redBallsPercentage=(redBallsCount / totalBallsCount) * 100;
    yellowBallsPercentage = (yellowBallsCount / totalBallsCount) * 100;
    accuracyText=`In: ${yellowBallsPercentage.toFixed(2)}%, Out: ${redBallsPercentage.toFixed(2)}%`;
    svg_court
    .append("text")
    .attr("x", height_court / 2)
    .attr("y", width_court + 20)
    .attr("text-anchor", "middle")
    .text(accuracyText);
}







// Button click event handlers
function handleButtonClick(buttonId) {
  if (buttonId === "button-djokovic") {
    update(DjokovicData); // Display Djokovic's data
  } else if (buttonId === "button-nadal") {
    update(NadalData); // Display Nadal's data
  }else if (buttonId === "button-djokovic1") {
    update(Djokovic1Data); // Display Nadal's data
  }
  else if (buttonId === "button-djokovic2") {
    update(Djokovic2Data); // Display Nadal's data
  }
  else if (buttonId === "button-djokovic3") {
    update(Djokovic3Data); // Display Nadal's data
  }else if (buttonId === "button-nadal1") {
    update(Nadal1Data); // Display Nadal's data
  }else if (buttonId === "button-nadal2") {
    update(Nadal2Data); // Display Nadal's data
  }else if (buttonId === "button-nadal3") {
    update(Nadal3Data); // Display Nadal's data
  }
  
}

// Add event listeners to the buttons
document.getElementById("button-djokovic").addEventListener("click", () => handleButtonClick("button-djokovic"));
document.getElementById("button-nadal").addEventListener("click", () => handleButtonClick("button-nadal"));
document.getElementById("button-djokovic1").addEventListener("click", () => handleButtonClick("button-djokovic1"));
document.getElementById("button-djokovic2").addEventListener("click", () => handleButtonClick("button-djokovic2"));
document.getElementById("button-djokovic3").addEventListener("click", () => handleButtonClick("button-djokovic3"));
document.getElementById("button-nadal1").addEventListener("click", () => handleButtonClick("button-nadal1"));
document.getElementById("button-nadal2").addEventListener("click", () => handleButtonClick("button-nadal2"));
document.getElementById("button-nadal3").addEventListener("click", () => handleButtonClick("button-nadal3"));


const points=[
  
    {
      "": 0,
      "rallyid": 1,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 0.92,
      "x": 1.92,
      "y": 21.96,
      "score": "0:0, 15:0"
    },
    {
      "": 2,
      "rallyid": 3,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 4,
      "totaltime": 4.159999999999997,
      "x": 3.33,
      "y": -0.39,
      "score": "0:0, 30:0"
    },
    {
      "": 4,
      "rallyid": 5,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.3999999999999915,
      "x": 1.62,
      "y": 17.18,
      "score": "0:0, 40:0"
    },
    {
      "": 5,
      "rallyid": 6,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 10,
      "totaltime": 10.400000000000006,
      "x": 6.41,
      "y": 12.78,
      "score": "1:0, 0:0"
    },
    {
      "": 7,
      "rallyid": 8,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 7,
      "totaltime": 7.199999999999989,
      "x": 0.5,
      "y": 18.67,
      "score": "1:0, 15:0"
    },
    {
      "": 8,
      "rallyid": 9,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 12,
      "totaltime": 0.9200000000000159,
      "x": 3.65,
      "y": 9.5,
      "score": "1:0, 30:0"
    },
    {
      "": 10,
      "rallyid": 11,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 4,
      "totaltime": 1.079999999999984,
      "x": 7.34,
      "y": 18.76,
      "score": "1:0, 30:15"
    },
    {
      "": 12,
      "rallyid": 13,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 13,
      "totaltime": 13.599999999999966,
      "x": 4.01,
      "y": 11.37,
      "score": "1:0, 40:15"
    },
    {
      "": 13,
      "rallyid": 14,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.6399999999999864,
      "x": 1.07,
      "y": 25.85,
      "score": "2:0, 0:0"
    },
    {
      "": 14,
      "rallyid": 15,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8000000000000114,
      "x": 4.39,
      "y": 27.45,
      "score": "2:0, 15:0"
    },
    {
      "": 16,
      "rallyid": 17,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 4,
      "totaltime": 4,
      "x": 5.45,
      "y": 30.23,
      "score": "2:0, 30:0"
    },
    {
      "": 17,
      "rallyid": 18,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 6,
      "totaltime": 6.399999999999977,
      "x": 8.55,
      "y": 22.48,
      "score": "2:0, 40:0"
    },
    {
      "": 18,
      "rallyid": 19,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 1.62,
      "y": 10.23,
      "score": "3:0, 0:0"
    },
    {
      "": 19,
      "rallyid": 20,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 12,
      "totaltime": 12.920000000000073,
      "x": 0.53,
      "y": 21.45,
      "score": "3:0, 15:0"
    },
    {
      "": 21,
      "rallyid": 22,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.7599999999999909,
      "x": 4.77,
      "y": 24.68,
      "score": "3:0, 15:15"
    },
    {
      "": 23,
      "rallyid": 24,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 4,
      "totaltime": 0.7199999999999136,
      "x": 7.3,
      "y": 22.58,
      "score": "3:0, 30:15"
    },
    {
      "": 24,
      "rallyid": 25,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.519999999999982,
      "x": 8.4,
      "y": 3.22,
      "score": "3:0, 30:30"
    },
    {
      "": 25,
      "rallyid": 26,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 7,
      "totaltime": 6.240000000000009,
      "x": 9,
      "y": 4.04,
      "score": "3:0, 40:30"
    },
    {
      "": 27,
      "rallyid": 28,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8400000000000318,
      "x": 8.34,
      "y": 24.45,
      "score": "3:0, 40:40"
    },
    {
      "": 28,
      "rallyid": 29,
      "server": "Nadal",
      "returner": "",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7999999999999545,
      "x": 2.27,
      "y": 24.56,
      "score": "3:0, 40:Ad"
    },
    {
      "": 29,
      "rallyid": 30,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.3999999999999773,
      "x": 0.88,
      "y": 8.57,
      "score": "3:1, 0:0"
    },
    {
      "": 30,
      "rallyid": 31,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.63,
      "y": 16.1,
      "score": "3:1, 15:0"
    },
    {
      "": 31,
      "rallyid": 32,
      "server": "Djokovic",
      "returner": "__undefined__",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 6,
      "totaltime": 7.319999999999936,
      "x": 1.78,
      "y": 12.85,
      "score": "3:1, 30:0"
    },
    {
      "": 32,
      "rallyid": 33,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.23,
      "y": 18.13,
      "score": "3:1, 40:0"
    },
    {
      "": 33,
      "rallyid": 34,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 5,
      "totaltime": 0.7200000000000273,
      "x": 7.33,
      "y": 20.36,
      "score": "4:1, 0:0"
    },
    {
      "": 35,
      "rallyid": 36,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 3,
      "totaltime": 2.160000000000082,
      "x": 0.2,
      "y": 23.01,
      "score": "4:1, 15:0"
    },
    {
      "": 36,
      "rallyid": 37,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8400000000001455,
      "x": 7.47,
      "y": 17.52,
      "score": "4:1, 15:15"
    },
    {
      "": 37,
      "rallyid": 38,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 3.1200000000001182,
      "x": 3.19,
      "y": 16.26,
      "score": "4:1, 15:30"
    },
    {
      "": 39,
      "rallyid": 40,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 11,
      "totaltime": 11.920000000000073,
      "x": 8.45,
      "y": 24.56,
      "score": "4:1, 30:30"
    },
    {
      "": 41,
      "rallyid": 42,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 6,
      "totaltime": 7.160000000000082,
      "x": 2.88,
      "y": 12.72,
      "score": "4:1, 30:40"
    },
    {
      "": 42,
      "rallyid": 43,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7599999999999909,
      "x": 4.55,
      "y": -0.62,
      "score": "4:2, 0:0"
    },
    {
      "": 43,
      "rallyid": 44,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 8,
      "totaltime": 1,
      "x": 8.38,
      "y": 13.42,
      "score": "4:2, 15:0"
    },
    {
      "": 45,
      "rallyid": 46,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 14,
      "totaltime": 16.7199999999998,
      "x": 0.61,
      "y": 23.77,
      "score": "4:2, 30:0"
    },
    {
      "": 47,
      "rallyid": 48,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 4,
      "totaltime": 3.4400000000000546,
      "x": 1,
      "y": -3.57,
      "score": "4:2, 40:0"
    },
    {
      "": 48,
      "rallyid": 49,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 1.9600000000000364,
      "x": 8.16,
      "y": 4.3,
      "score": "5:2, 0:0"
    },
    {
      "": 50,
      "rallyid": 51,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 7,
      "totaltime": 7.079999999999927,
      "x": 8.4,
      "y": 0.61,
      "score": "5:2, 0:15"
    },
    {
      "": 53,
      "rallyid": 54,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 16,
      "totaltime": 17.3599999999999,
      "x": 6.12,
      "y": 12.72,
      "score": "5:2, 0:30"
    },
    {
      "": 55,
      "rallyid": 56,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 4,
      "totaltime": 0.7999999999999545,
      "x": 6.62,
      "y": 12.17,
      "score": "5:2, 0:40"
    },
    {
      "": 56,
      "rallyid": 57,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.3600000000001273,
      "x": 8.34,
      "y": 1.15,
      "score": "5:3, 0:0"
    },
    {
      "": 58,
      "rallyid": 59,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 11,
      "totaltime": 12.240000000000009,
      "x": 6.8,
      "y": 11.11,
      "score": "5:3, 0:15"
    },
    {
      "": 59,
      "rallyid": 60,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 6,
      "totaltime": 6.759999999999991,
      "x": 9.07,
      "y": 1.33,
      "score": "5:3, 15:15"
    },
    {
      "": 61,
      "rallyid": 62,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 11,
      "totaltime": 12.639999999000338,
      "x": 0.78,
      "y": 20.16,
      "score": "5:3, 30:15"
    },
    {
      "": 62,
      "rallyid": 63,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 22,
      "totaltime": 21.40000000000009,
      "x": 3,
      "y": 12.51,
      "score": "5:3, 40:15"
    },
    {
      "": 63,
      "rallyid": 64,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.640000000999862,
      "x": 2.81,
      "y": 12.03,
      "score": "6:3 0:0, 0:0"
    },
    //////end of first set
    {
      "": 64,
      "rallyid": 65,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 5,
      "totaltime": 4.360000000000127,
      "x": -1.04,
      "y": 20.45,
      "score": "6:3 0:0, 15:0"
    },
    {
      "": 65,
      "rallyid": 66,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 0.8799999999996544,
      "x": 1.67,
      "y": 20.06,
      "score": "6:3 0:0, 15:15"
    },
    {
      "": 66,
      "rallyid": 67,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7200000000002547,
      "x": 8.51,
      "y": -1.35,
      "score": "6:3 0:0, 15:30"
    },
    {
      "": 69,
      "rallyid": 70,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 4,
      "totaltime": 3.4400000000000546,
      "x": 1.4,
      "y": 1.59,
      "score": "6:3 0:0, 30:30"
    },
    {
      "": 70,
      "rallyid": 71,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.84,
      "y": 29.68,
      "score": "6:3 0:0, 30:40"
    },
    {
      "": 72,
      "rallyid": 73,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 3,
      "totaltime": 1.7600000000002183,
      "x": 1.92,
      "y": 21.65,
      "score": "6:3 0:1, 0:0"
    },
    {
      "": 74,
      "rallyid": 75,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 4,
      "totaltime": 3.880000000000109,
      "x": 5.85,
      "y": 12.58,
      "score": "6:3 0:1, 15:0"
    },
    {
      "": 76,
      "rallyid": 77,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 4,
      "totaltime": 2.7599999999997635,
      "x": 6.64,
      "y": 13.42,
      "score": "6:3 0:1, 30:0"
    },
    {
      "": 77,
      "rallyid": 78,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 2.91,
      "y": 29.27,
      "score": "6:3 0:1, 40:0"
    },
    {
      "": 78,
      "rallyid": 79,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.5599999999999454,
      "x": 4.26,
      "y": 11.57,
      "score": "6:3 1:1, 0:0"
    },
    {
      "": 79,
      "rallyid": 80,
      "server": "Nadal",
      "returner": "__undefined__",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7600000000002183,
      "x": 2.89,
      "y": 13.93,
      "score": "6:3 1:1, 0:15"
    },
    {
      "": 80,
      "rallyid": 81,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 5,
      "totaltime": 4.480000000000018,
      "x": 5.87,
      "y": -0.81,
      "score": "6:3 1:1, 15:15"
    },
    {
      "": 81,
      "rallyid": 82,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 19,
      "totaltime": 16.159999999999854,
      "x": 5.46,
      "y": 17.09,
      "score": "6:3 1:1, 30:15"
    },
    {
      "": 83,
      "rallyid": 84,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 3,
      "totaltime": 2,
      "x": 9.26,
      "y": 0.58,
      "score": "6:3 1:1, 30:30"
    },
    {
      "": 85,
      "rallyid": 86,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 7,
      "totaltime": 7.200000000000273,
      "x": 1.61,
      "y": 6.54,
      "score": "6:3 1:1, 30:40"
    },
    {
      "": 86,
      "rallyid": 87,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8800000000001091,
      "x": 2.94,
      "y": 12.78,
      "score": "6:3 1:2, 0:0"
    },
    {
      "": 88,
      "rallyid": 89,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.9200000000000728,
      "x": 6.06,
      "y": 12.93,
      "score": "6:3 1:2, 15:0"
    },
    {
      "": 90,
      "rallyid": 91,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 5,
      "totaltime": 4.800000000000182,
      "x": 3.36,
      "y": 15.54,
      "score": "6:3 1:2, 15:15"
    },
    {
      "": 91,
      "rallyid": 92,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7600000000002183,
      "x": 9.86,
      "y": 18.4,
      "score": "6:3 1:2, 30:15"
    },
    {
      "": 92,
      "rallyid": 93,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 6,
      "totaltime": 4.559999999999945,
      "x": 0.61,
      "y": 24.45,
      "score": "6:3 1:2, 40:15"
    },
    {
      "": 93,
      "rallyid": 94,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 5.46,
      "y": -1.77,
      "score": "6:3 2:2, 0:0"
    },
    {
      "": 95,
      "rallyid": 96,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 15,
      "totaltime": 0.8399999999996908,
      "x": 1.47,
      "y": 26.69,
      "score": "6:3 2:2, 15:0"
    },
    {
      "": 96,
      "rallyid": 97,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 5,
      "totaltime": 5.360000000000127,
      "x": 6.91,
      "y": 24.33,
      "score": "6:3 2:2, 30:0"
    },
    {
      "": 97,
      "rallyid": 98,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": -1.11,
      "y": 26.94,
      "score": "6:3 2:2, 30:15"
    },
    {
      "": 98,
      "rallyid": 99,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.119999999999891,
      "x": 3.83,
      "y": 11.24,
      "score": "6:3 2:2, 40:15"
    },
    {
      "": 100,
      "rallyid": 101,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": -0.5199999999999818,
      "x": 5.94,
      "y": 27.32,
      "score": "6:3 3:2, 0:0"
    },
    {
      "": 102,
      "rallyid": 103,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "second",
      "strokes": 3,
      "totaltime": 2.2400000000002365,
      "x": 3.29,
      "y": 26.82,
      "score": "6:3 3:2, 0:15"
    },
    {
      "": 103,
      "rallyid": 104,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.880000000000109,
      "x": 0.23,
      "y": 4.71,
      "score": "6:3 3:2, 15:15"
    },
    {
      "": 104,
      "rallyid": 105,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.199999999999818,
      "x": 9.15,
      "y": 17.78,
      "score": "6:3 3:2, 15:30"
    },
    {
      "": 107,
      "rallyid": 108,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 7,
      "totaltime": 7.920000000000073,
      "x": 0.8,
      "y": 21.85,
      "score": "6:3 3:2, 30:30"
    },
    {
      "": 108,
      "rallyid": 109,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 14,
      "totaltime": 17.480000000000018,
      "x": 9.17,
      "y": 5.84,
      "score": "6:3 3:2, 40:30"
    },
    {
      "": 109,
      "rallyid": 110,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 11,
      "totaltime": 9.11999999999989,
      "x": 8.35,
      "y": 13,
      "score": "6:3 3:2, 40:40"
    },
    {
      "": 110,
      "rallyid": 111,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 7,
      "totaltime": 0.8399999999996908,
      "x": 7.57,
      "y": 21.55,
      "score": "6:3 3:2, Ad:40"
    },
    {
      "": 111,
      "rallyid": 112,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 8,
      "totaltime": 10.039999999999964,
      "x": 8.35,
      "y": 0.26,
      "score": "6:3 3:2, 40:40"
    },
    {
      "": 113,
      "rallyid": 114,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 8,
      "totaltime": 8.88000000000011,
      "x": 1.1,
      "y": 4.57,
      "score": "6:3 3:2, Ad:40"
    },
    {
      "": 114,
      "rallyid": 115,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 10,
      "totaltime": 0.8400000000001455,
      "x": 3.7,
      "y": 12.93,
      "score": "6:3 4:2, 0:0"
    },
    {
      "": 116,
      "rallyid": 117,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 7,
      "totaltime": 6.59999999899992,
      "x": 7.57,
      "y": 10.17,
      "score": "6:3 4:2, 0:15"
    },
    {
      "": 118,
      "rallyid": 119,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "double_fault",
      "serve": "second",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.75,
      "y": 12.03,
      "score": "6:3 4:2, 15:15"
    },
    {
      "": 119,
      "rallyid": 120,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 14,
      "totaltime": 1.8800000000001091,
      "x": 8.23,
      "y": 20.65,
      "score": "6:3 4:2, 30:15"
    },
    {
      "": 121,
      "rallyid": 122,
      "server": "Nadal",
      "returner": "__undefined__",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 8,
      "totaltime": 8.840000000000146,
      "x": 8.14,
      "y": 22.17,
      "score": "6:3 4:2, 40:15"
    },
    {
      "": 122,
      "rallyid": 123,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 7,
      "totaltime": 6.880000000000109,
      "x": 5.89,
      "y": 11.96,
      "score": "6:3 5:2, 0:0"
    },
    {
      "": 124,
      "rallyid": 125,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 3,
      "totaltime": 1.8800000000001091,
      "x": 2.13,
      "y": 0.54,
      "score": "6:3 5:2, 15:0"
    },
    {
      "": 125,
      "rallyid": 126,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 1.78,
      "y": 8.86,
      "score": "6:3 5:2, 30:0"
    },
    {
      "": 126,
      "rallyid": 127,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.61,
      "y": 7.91,
      "score": "6:3 5:2, 40:0"
    },
    {
      "": 127,
      "rallyid": 128,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 1.4,
      "y": 8.41,
      "score": "6:3 6:2 0:0, 0:0"
    },
    /////////////end of second set
    {
      "": 129,
      "rallyid": 130,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 7,
      "totaltime": 2.4799999999995634,
      "x": 0.68,
      "y": 21.85,
      "score": "6:3 6:2 0:0, 0:15"
    },
    {
      "": 130,
      "rallyid": 131,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 12,
      "totaltime": 14.480000000000473,
      "x": 1,
      "y": 7.21,
      "score": "6:3 6:2 0:0, 15:15"
    },
    {
      "": 131,
      "rallyid": 132,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.6799999999993815,
      "x": 1.58,
      "y": 12.3,
      "score": "6:3 6:2 0:0, 15:30"
    },
    {
      "": 133,
      "rallyid": 134,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 11,
      "totaltime": 8.239999999999782,
      "x": 5.28,
      "y": 12.3,
      "score": "6:3 6:2 0:0, 30:30"
    },
    {
      "": 134,
      "rallyid": 135,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 7,
      "totaltime": 7.199999999999818,
      "x": 1.63,
      "y": 17.26,
      "score": "6:3 6:2 0:0, 30:40"
    },
    {
      "": 135,
      "rallyid": 136,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7600000000002183,
      "x": 6.32,
      "y": 12.93,
      "score": "6:3 6:2 0:1, 0:0"
    },
    {
      "": 138,
      "rallyid": 139,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "second",
      "strokes": 4,
      "totaltime": 0.8400000000001455,
      "x": 7.98,
      "y": 12.51,
      "score": "6:3 6:2 0:1, 15:0"
    },
    {
      "": 140,
      "rallyid": 141,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 4,
      "totaltime": 0.7999999999992724,
      "x": 0.82,
      "y": 6.64,
      "score": "6:3 6:2 0:1, 30:0"
    },
    {
      "": 142,
      "rallyid": 143,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.8799999999991996,
      "x": 6.28,
      "y": -0.91,
      "score": "6:3 6:2 0:1, 40:0"
    },
    {
      "": 145,
      "rallyid": 146,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.9200000000000728,
      "x": 6.98,
      "y": -2.1,
      "score": "6:3 6:2 1:1, 0:0"
    },
    {
      "": 146,
      "rallyid": 147,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7600000000002183,
      "x": 4.42,
      "y": 24.45,
      "score": "6:3 6:2 1:1, 0:15"
    },
    {
      "": 148,
      "rallyid": 149,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.9200000000000728,
      "x": 8.67,
      "y": 11.43,
      "score": "6:3 6:2 1:1, 15:15"
    },
    {
      "": 150,
      "rallyid": 151,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "double_fault",
      "serve": "second",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.63,
      "y": 6.29,
      "score": "6:3 6:2 1:1, 30:15"
    },
    {
      "": 151,
      "rallyid": 152,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 11,
      "totaltime": 12.800000000000182,
      "x": 8.73,
      "y": -0.71,
      "score": "6:3 6:2 1:1, 40:15"
    },
    {
      "": 153,
      "rallyid": 154,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 16,
      "totaltime": 11.359999999999673,
      "x": 4.74,
      "y": 11.7,
      "score": "6:3 6:2 1:1, 40:30"
    },
    {
      "": 154,
      "rallyid": 155,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 11,
      "totaltime": 14.159999999999854,
      "x": 4.88,
      "y": 13.86,
      "score": "6:3 6:2 2:1, 0:0"
    },
    {
      "": 155,
      "rallyid": 156,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 8,
      "totaltime": 8.960000000000036,
      "x": 8.21,
      "y": 20.84,
      "score": "6:3 6:2 2:1, 0:15"
    },
    {
      "": 156,
      "rallyid": 157,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.519999999999527,
      "x": 2.77,
      "y": 5.36,
      "score": "6:3 6:2 2:1, 15:15"
    },
    {
      "": 157,
      "rallyid": 158,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.9200000000000728,
      "x": 2.96,
      "y": 23.55,
      "score": "6:3 6:2 2:1, 30:15"
    },
    {
      "": 159,
      "rallyid": 160,
      "server": "Djokovic",
      "returner": "",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "second",
      "strokes": 3,
      "totaltime": 1.0399999999999636,
      "x": 6.64,
      "y": 6.79,
      "score": "6:3 6:2 2:1, 40:15"
    },
    {
      "": 160,
      "rallyid": 161,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 11,
      "totaltime": 0.6799999999993815,
      "x": 1.08,
      "y": 4.57,
      "score": "6:3 6:2 3:1, 0:0"
    },
    {
      "": 161,
      "rallyid": 162,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.5599999999994907,
      "x": 1.55,
      "y": 21.96,
      "score": "6:3 6:2 3:1, 0:15"
    },
    {
      "": 162,
      "rallyid": 163,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 11.29,
      "y": 25.49,
      "score": "6:3 6:2 3:1, 0:30"
    },
    {
      "": 163,
      "rallyid": 164,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7199999999993452,
      "x": 8.58,
      "y": -1.95,
      "score": "6:3 6:2 3:1, 0:40"
    },
    {
      "": 164,
      "rallyid": 165,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 3,
      "totaltime": 1.5599999999994907,
      "x": 6.09,
      "y": 25.26,
      "score": "6:3 6:2 3:1, 15:40"
    },
    {
      "": 167,
      "rallyid": 168,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "winner",
      "serve": "second",
      "strokes": 5,
      "totaltime": 4.399999999999636,
      "x": 1.83,
      "y": 16.18,
      "score": "6:3 6:2 3:2, 0:0"
    },
    {
      "": 168,
      "rallyid": 169,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 16,
      "totaltime": 9.599999999999454,
      "x": 7.93,
      "y": 13,
      "score": "6:3 6:2 3:2, 15:0"
    },
    {
      "": 169,
      "rallyid": 170,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 7,
      "totaltime": 8.520000000000437,
      "x": 0.72,
      "y": 24.11,
      "score": "6:3 6:2 3:2, 15:15"
    },
    {
      "": 170,
      "rallyid": 171,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.7200000000002547,
      "x": 8.27,
      "y": 11.9,
      "score": "6:3 6:2 3:2, 30:15"
    },
    {
      "": 172,
      "rallyid": 173,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 11,
      "totaltime": 12.480000000000473,
      "x": 9.33,
      "y": 18.94,
      "score": "6:3 6:2 3:2, 30:30"
    },
    {
      "": 173,
      "rallyid": 174,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "net",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.2399999999997817,
      "x": 7.67,
      "y": 12.03,
      "score": "6:3 6:2 3:2, 30:40"
    },
    {
      "": 174,
      "rallyid": 175,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 9,
      "totaltime": 6.799999999999272,
      "x": 5.86,
      "y": 11.83,
      "score": "6:3 6:2 3:2, 40:40"
    },
    {
      "": 176,
      "rallyid": 177,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8800000000001091,
      "x": 5.22,
      "y": 14.15,
      "score": "6:3 6:2 3:2, Ad:40"
    },
    {
      "": 177,
      "rallyid": 178,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 3,
      "totaltime": 2.4000000000005457,
      "x": 1.89,
      "y": 19.59,
      "score": "6:3 6:2 4:2, 0:0"
    },
    {
      "": 178,
      "rallyid": 179,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.480000000000473,
      "x": 8.18,
      "y": 19.78,
      "score": "6:3 6:2 4:2, 15:0"
    },
    {
      "": 179,
      "rallyid": 180,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "ace",
      "serve": "first",
      "strokes": 1,
      "totaltime": 0,
      "x": 4.62,
      "y": 6.79,
      "score": "6:3 6:2 4:2, 15:15"
    },
    {
      "": 181,
      "rallyid": 182,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.7599999999993088,
      "x": 6.16,
      "y": 26.09,
      "score": "6:3 6:2 4:2, 15:30"
    },
    {
      "": 182,
      "rallyid": 183,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.7599999999993088,
      "x": 7.68,
      "y": 26.69,
      "score": "6:3 6:2 4:2, 15:40"
    },
    {
      "": 185,
      "rallyid": 186,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "net",
      "serve": "second",
      "strokes": 2,
      "totaltime": 0.8000000000001819,
      "x": 6.39,
      "y": 13,
      "score": "6:3 6:2 4:3, 0:0"
    },
    {
      "": 187,
      "rallyid": 188,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "second",
      "strokes": 3,
      "totaltime": 1.0799999999999272,
      "x": 1.23,
      "y": 5.55,
      "score": "6:3 6:2 4:3, 0:15"
    },
    {
      "": 188,
      "rallyid": 189,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 7,
      "totaltime": 7.440000000000509,
      "x": 6.57,
      "y": 5.75,
      "score": "6:3 6:2 4:3, 15:15"
    },
    {
      "": 189,
      "rallyid": 190,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8000000000001819,
      "x": -1.48,
      "y": 22.8,
      "score": "6:3 6:2 4:3, 30:15"
    },
    {
      "": 190,
      "rallyid": 191,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 7,
      "totaltime": 3.319999999999709,
      "x": 10.23,
      "y": 3.78,
      "score": "6:3 6:2 4:3, 30:30"
    },
    {
      "": 192,
      "rallyid": 193,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 4,
      "totaltime": 0.7600000000002183,
      "x": 6.48,
      "y": 13.42,
      "score": "6:3 6:2 4:3, 40:30"
    },
    {
      "": 193,
      "rallyid": 194,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 17,
      "totaltime": 14.079999999999927,
      "x": 9.36,
      "y": 0.78,
      "score": "6:3 6:2 4:3, 40:40"
    },
    {
      "": 194,
      "rallyid": 195,
      "server": "Djokovic",
      "returner": "Nadal",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.8799999999991996,
      "x": -2.11,
      "y": 21.55,
      "score": "6:3 6:2 4:3, Ad:40"
    },
    {
      "": 195,
      "rallyid": 196,
      "server": "Djokovic",
      "returner": "",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 7,
      "totaltime": 7.960000000000036,
      "x": 6.58,
      "y": 12.03,
      "score": "6:3 6:2 5:3, 0:0"
    },
    {
      "": 197,
      "rallyid": 198,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 2,
      "totaltime": 0.6799999999993815,
      "x": 5.53,
      "y": -0.02,
      "score": "6:3 6:2 5:3, 0:15"
    },
    {
      "": 198,
      "rallyid": 199,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 6,
      "totaltime": 6.599999999999454,
      "x": 2.44,
      "y": 4.71,
      "score": "6:3 6:2 5:3, 15:15"
    },
    {
      "": 200,
      "rallyid": 201,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "net",
      "serve": "first",
      "strokes": 9,
      "totaltime": 9,
      "x": 4.26,
      "y": 11.57,
      "score": "6:3 6:2 5:3, 30:15"
    },
    {
      "": 201,
      "rallyid": 202,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "winner",
      "serve": "first",
      "strokes": 4,
      "totaltime": 3.0799999999999272,
      "x": 1.88,
      "y": 3.36,
      "score": "6:3 6:2 5:3, 40:15"
    },
    {
      "": 203,
      "rallyid": 204,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Nadal",
      "reason": "out",
      "serve": "first",
      "strokes": 12,
      "totaltime": 0.8400000000001455,
      "x": 8.45,
      "y": -0.56,
      "score": "6:3 6:2 5:3, 40:30"
    },
    {
      "": 205,
      "rallyid": 206,
      "server": "Nadal",
      "returner": "Djokovic",
      "winner": "Djokovic",
      "reason": "out",
      "serve": "second",
      "strokes": 5,
      "totaltime": 4.599999999999454,
      "x": 0.59,
      "y": 23.86,
      "score": "6:3 6:2 6:3, 0:0"
    }
  
]


const playerWins = {
  Djokovic: 0,
  Nadal: 0
};

points.forEach(d => {
  const winner = d.winner;
  playerWins[winner]++;
});

// Postavi veličinu i margine grafa
const width = 300;
const height = 200;
const margin = { top: 20, right: 20, bottom: 30, left: 40 };

// Stvori D3.js skalu za osi
const xScale = d3
  .scaleBand()
  .domain(Object.keys(playerWins))
  .range([margin.left, width - margin.right])
  .padding(0.1);

const yScale = d3
  .scaleLinear()
  .domain([0, d3.max(Object.values(playerWins))])
  .range([height - margin.bottom, margin.top]);

// Stvori SVG element za crtanje grafa
const svg_barchart = d3
  .select("#barchart")
  .append("svg")
  .attr("width", width)
  .attr("height", height)
 ;

// Crtaj trake barcharta
svg_barchart
  .selectAll("rect")
  .data(Object.entries(playerWins))
  .enter()
  .append("rect")
  .attr("x", d => xScale(d[0]))
  .attr("y", d => yScale(d[1]))
  .attr("width", xScale.bandwidth())
  .attr("height", d => height - margin.bottom - yScale(d[1]))
  .attr("fill", "green")
  .on("mouseover", (event, d) => {
    // Prikazi vrijednost stupca u prozorčiću
    svg_barchart
      .append("text")
      .attr("x", xScale(d[0]) + xScale.bandwidth() / 2)
      .attr("y", yScale(d[1]) - 5)
      .attr("text-anchor", "middle")
      .text(d[1])
      .attr("class", "value-tooltip");
  })
  .on("mouseout", () => {
    // Ukloni prozorčić kada miš napusti stupac
    svg_barchart.selectAll(".value-tooltip").remove();
  });

// Dodaj osi
svg_barchart
  .append("g")
  .attr("transform", `translate(0,${height - margin.bottom})`)
  .call(d3.axisBottom(xScale));

svg_barchart
  .append("g")
  .attr("transform", `translate(${margin.left},0)`)
  .call(d3.axisLeft(yScale));


